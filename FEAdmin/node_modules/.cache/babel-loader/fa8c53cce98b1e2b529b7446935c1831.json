{"ast":null,"code":"import _objectSpread from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\src\\\\app\\\\views\\\\update-happenings\\\\promoted\\\\PromotedCollapse.js\";\nimport { Button, Col, DatePicker, Form, Input, Row, Table } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { getPromotedStaff, addProposedStaff } from '../UpdateHappeningsService';\nimport { ActionButton } from 'app/views/general-settings/TableButton';\nimport moment from 'moment';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport PromotedModal from './PromotedModal';\ntoast.configure({\n  autoClose: 300,\n  draggable: false,\n  limit: 3\n});\nvar TextArea = Input.TextArea;\n\nfunction PromotedCollapse(_ref) {\n  var _this = this;\n\n  var formRef = _ref.formRef,\n      staffInfo = _ref.staffInfo,\n      onSend = _ref.onSend,\n      onDelete = _ref.onDelete;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      promotedHistory = _useState2[0],\n      setPromotedHistory = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      promotedForm = _useState4[0],\n      setPromotedForm = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      promotedRecord = _useState6[0],\n      setPromotedRecord = _useState6[1];\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var handleGetListNewStaff = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(staffInfo) {\n      var _res$data;\n\n      var res, _res$data2;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getPromotedStaff(staffInfo);\n\n            case 2:\n              res = _context.sent;\n\n              if ((res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.code) === 200) {\n                setPromotedHistory(res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.data);\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleGetListNewStaff(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    handleGetListNewStaff(staffInfo);\n  }, []);\n\n  var addPromotedList = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n      var _res$data3;\n\n      var staffData, res, _res$data4, _res$data5;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              staffData = _objectSpread(_objectSpread(_objectSpread({}, promotedHistory), values), {}, {\n                employeeId: staffInfo.employeeId\n              });\n              _context2.next = 3;\n              return addProposedStaff(staffData);\n\n            case 3:\n              res = _context2.sent;\n\n              if ((res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.code) === 200) {\n                toast.success(res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.message);\n                form.resetFields();\n                handleShowPromotedForm();\n              } else {\n                toast.warning(res === null || res === void 0 ? void 0 : (_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.message);\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function addPromotedList(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onReset = function onReset() {\n    form.resetFields();\n  };\n\n  var handleShowPromotedForm = function handleShowPromotedForm() {\n    setPromotedForm(!promotedForm);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-form-layout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onFinish: addPromotedList,\n    ref: formRef,\n    form: form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 8,\n    xl: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"createTime\",\n    label: \"Ng\\xE0y th\\u0103ng ch\\u1EE9c\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    placeholder: \"YYYY-MM-DD\",\n    format: \"YYYY-MM-DD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 8,\n    xl: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"lanThu\",\n    label: \"L\\u1EA7n th\\u1EE9\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }, {\n      pattern: '^([-]?[0-9][0-9]*|0)$',\n      message: 'Trường này phải là số'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 8,\n    xl: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"oldPosition\",\n    label: \"Ch\\u1EE9c v\\u1EE5 c\\u0169\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 8,\n    xl: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"newPosition\",\n    label: \"Ch\\u1EE9c v\\u1EE5 hi\\u1EC7n t\\u1EA1i\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 8,\n    xl: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"reason\",\n    label: \"L\\xFD do\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    autoSize: {\n      minRows: 1,\n      maxRows: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 8,\n    xl: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"note\",\n    label: \"Ghi ch\\xFA\",\n    rules: [{\n      required: true\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    autoSize: {\n      minRows: 1,\n      maxRows: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 24,\n    xl: 8,\n    style: {\n      display: 'flex',\n      marginTop: '10px',\n      alignItems: 'flex-end'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-form\",\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 29\n    }\n  }, \"Th\\xEAm\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"cancel-form\",\n    htmlType: \"button\",\n    onClick: onReset,\n    type: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 29\n    }\n  }, \"H\\u1EE7y\"))))), /*#__PURE__*/React.createElement(Table, {\n    columns: [{\n      key: '1',\n      title: 'Hành động',\n      render: function render(record) {\n        return /*#__PURE__*/React.createElement(ActionButton, {\n          update: true,\n          deleted: true,\n          item: record,\n          onSelect: function onSelect(record, method) {\n            if (method === 0) {\n              setPromotedRecord(record);\n              handleShowPromotedForm();\n            } else if (method === 1) {\n              onDelete();\n            } else {\n              alert('Call Selected Here:' + record.id);\n            }\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 33\n          }\n        });\n      }\n    }, {\n      key: '2',\n      title: 'Chức vụ cũ',\n      dataIndex: 'oldPosition'\n    }, {\n      key: '3',\n      title: 'Chức vụ hiện tại',\n      dataIndex: 'newPosition'\n    }, {\n      key: '4',\n      title: 'Ngày',\n      render: function render(record) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 37\n          }\n        }, moment(record.createTime).format('DD-MM-YYYY')));\n      }\n    }, {\n      key: '5',\n      title: 'Lý do',\n      dataIndex: 'reason'\n    }, {\n      key: '6',\n      title: 'Ghi chú',\n      dataIndex: 'note'\n    }],\n    rowKey: \"studentId\",\n    dataSource: promotedHistory,\n    pagination: {\n      defaultPageSize: 5,\n      showSizeChanger: true,\n      pageSizeOptions: ['5', '10', '20', '30']\n    },\n    style: {\n      margin: '15px 5px 0 5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }), promotedForm && /*#__PURE__*/React.createElement(PromotedModal, {\n    open: promotedForm,\n    onOk: handleShowPromotedForm,\n    onCancel: handleShowPromotedForm,\n    staffInfo: staffInfo,\n    promotedRecord: promotedRecord,\n    onSend: onSend,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 17\n    }\n  }));\n}\n\nexport default PromotedCollapse;","map":{"version":3,"sources":["D:/DAn/FEAmin/QLNV/src/app/views/update-happenings/promoted/PromotedCollapse.js"],"names":["Button","Col","DatePicker","Form","Input","Row","Table","React","useEffect","useState","getPromotedStaff","addProposedStaff","ActionButton","moment","toast","PromotedModal","configure","autoClose","draggable","limit","TextArea","PromotedCollapse","formRef","staffInfo","onSend","onDelete","promotedHistory","setPromotedHistory","promotedForm","setPromotedForm","promotedRecord","setPromotedRecord","useForm","form","handleGetListNewStaff","res","data","code","addPromotedList","values","staffData","employeeId","success","message","resetFields","handleShowPromotedForm","warning","onReset","required","whitespace","pattern","minRows","maxRows","display","marginTop","alignItems","key","title","render","record","method","alert","id","dataIndex","createTime","format","defaultPageSize","showSizeChanger","pageSizeOptions","margin"],"mappings":"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","sourcesContent":["import { Button, Col, DatePicker, Form, Input, Row, Table } from 'antd';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { getPromotedStaff, addProposedStaff } from '../UpdateHappeningsService';\r\nimport { ActionButton } from 'app/views/general-settings/TableButton';\r\nimport moment from 'moment';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport PromotedModal from './PromotedModal';\r\n\r\ntoast.configure({\r\n    autoClose: 300,\r\n    draggable: false,\r\n    limit: 3,\r\n});\r\n\r\nconst { TextArea } = Input;\r\n\r\nfunction PromotedCollapse({ formRef, staffInfo, onSend, onDelete }) {\r\n    const [promotedHistory, setPromotedHistory] = useState([]);\r\n    const [promotedForm, setPromotedForm] = useState(false);\r\n    const [promotedRecord, setPromotedRecord] = useState(false);\r\n\r\n    const [form] = Form.useForm();\r\n\r\n    const handleGetListNewStaff = async (staffInfo) => {\r\n        const res = await getPromotedStaff(staffInfo);\r\n        if (res?.data?.code === 200) {\r\n            setPromotedHistory(res?.data?.data);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        handleGetListNewStaff(staffInfo);\r\n    }, []);\r\n\r\n    const addPromotedList = async (values) => {\r\n        const staffData = {\r\n            ...promotedHistory,\r\n            ...values,\r\n            employeeId: staffInfo.employeeId,\r\n        };\r\n        const res = await addProposedStaff(staffData);\r\n        if (res?.data?.code === 200) {\r\n            toast.success(res?.data?.message);\r\n            form.resetFields();\r\n            handleShowPromotedForm();\r\n        } else {\r\n            toast.warning(res?.data?.message);\r\n        }\r\n    };\r\n\r\n    const onReset = () => {\r\n        form.resetFields();\r\n    };\r\n\r\n    const handleShowPromotedForm = () => {\r\n        setPromotedForm(!promotedForm);\r\n    };\r\n\r\n    return (\r\n        <div className=\"content-form-layout\">\r\n            <Form onFinish={addPromotedList} ref={formRef} form={form}>\r\n                <Row>\r\n                    <Col span={24} md={8} xl={5}>\r\n                        <Form.Item\r\n                            name=\"createTime\"\r\n                            label=\"Ngày thăng chức\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <DatePicker placeholder=\"YYYY-MM-DD\" format=\"YYYY-MM-DD\" />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={8} xl={3}>\r\n                        <Form.Item\r\n                            name=\"lanThu\"\r\n                            label=\"Lần thứ\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                                {\r\n                                    pattern: '^([-]?[0-9][0-9]*|0)$',\r\n                                    message: 'Trường này phải là số',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={8} xl={8}>\r\n                        <Form.Item\r\n                            name=\"oldPosition\"\r\n                            label=\"Chức vụ cũ\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={8} xl={8}>\r\n                        <Form.Item\r\n                            name=\"newPosition\"\r\n                            label=\"Chức vụ hiện tại\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={8} xl={8}>\r\n                        <Form.Item\r\n                            name=\"reason\"\r\n                            label=\"Lý do\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                            ]}\r\n                        >\r\n                            <TextArea\r\n                                autoSize={{\r\n                                    minRows: 1,\r\n                                    maxRows: 3,\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={8} xl={8}>\r\n                        <Form.Item\r\n                            name=\"note\"\r\n                            label=\"Ghi chú\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <TextArea\r\n                                autoSize={{\r\n                                    minRows: 1,\r\n                                    maxRows: 3,\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col\r\n                        span={24}\r\n                        md={24}\r\n                        xl={8}\r\n                        style={{ display: 'flex', marginTop: '10px', alignItems: 'flex-end' }}\r\n                    >\r\n                        <Form.Item>\r\n                            <Button className=\"add-form\" type=\"primary\" htmlType=\"submit\">\r\n                                Thêm\r\n                            </Button>\r\n                            <Button className=\"cancel-form\" htmlType=\"button\" onClick={onReset} type=\"primary\">\r\n                                Hủy\r\n                            </Button>\r\n                        </Form.Item>\r\n                    </Col>\r\n                </Row>\r\n            </Form>\r\n\r\n            <Table\r\n                columns={[\r\n                    {\r\n                        key: '1',\r\n                        title: 'Hành động',\r\n                        render: (record) => {\r\n                            return (\r\n                                <ActionButton\r\n                                    update\r\n                                    deleted\r\n                                    item={record}\r\n                                    onSelect={(record, method) => {\r\n                                        if (method === 0) {\r\n                                            setPromotedRecord(record);\r\n                                            handleShowPromotedForm();\r\n                                        } else if (method === 1) {\r\n                                            onDelete();\r\n                                        } else {\r\n                                            alert('Call Selected Here:' + record.id);\r\n                                        }\r\n                                    }}\r\n                                />\r\n                            );\r\n                        },\r\n                    },\r\n                    { key: '2', title: 'Chức vụ cũ', dataIndex: 'oldPosition' },\r\n                    { key: '3', title: 'Chức vụ hiện tại', dataIndex: 'newPosition' },\r\n                    {\r\n                        key: '4',\r\n                        title: 'Ngày',\r\n                        render: (record) => {\r\n                            return (\r\n                                <div>\r\n                                    <p>{moment(record.createTime).format('DD-MM-YYYY')}</p>\r\n                                </div>\r\n                            );\r\n                        },\r\n                    },\r\n                    { key: '5', title: 'Lý do', dataIndex: 'reason' },\r\n                    { key: '6', title: 'Ghi chú', dataIndex: 'note' },\r\n                ]}\r\n                rowKey=\"studentId\"\r\n                dataSource={promotedHistory}\r\n                pagination={{\r\n                    defaultPageSize: 5,\r\n                    showSizeChanger: true,\r\n                    pageSizeOptions: ['5', '10', '20', '30'],\r\n                }}\r\n                style={{ margin: '15px 5px 0 5px' }}\r\n            />\r\n\r\n            {promotedForm && (\r\n                <PromotedModal\r\n                    open={promotedForm}\r\n                    onOk={handleShowPromotedForm}\r\n                    onCancel={handleShowPromotedForm}\r\n                    staffInfo={staffInfo}\r\n                    promotedRecord={promotedRecord}\r\n                    onSend={onSend}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PromotedCollapse;\r\n"]},"metadata":{},"sourceType":"module"}