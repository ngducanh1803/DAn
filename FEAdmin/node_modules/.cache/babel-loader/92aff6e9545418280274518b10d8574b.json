{"ast":null,"code":"import _objectSpread from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\src\\\\app\\\\views\\\\update-happenings\\\\proposed\\\\ProposeCollapse.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Button, Col, DatePicker, Form, Input, Row, Table } from 'antd';\nimport { ActionButton } from 'app/views/general-settings/TableButton';\nimport { getProposedStaff, addProposedStaff } from '../UpdateHappeningsService';\nimport moment from 'moment';\nimport ProposedForm from './ProposedForm';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\ntoast.configure({\n  autoClose: 1000,\n  draggable: false,\n  limit: 3\n});\nvar TextArea = Input.TextArea;\n\nfunction ProposedCollapse(_ref) {\n  var _this = this;\n\n  var formRef = _ref.formRef,\n      staffInfo = _ref.staffInfo,\n      onSend = _ref.onSend,\n      onDelete = _ref.onDelete;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      proposedHistory = _useState2[0],\n      setProposedHistory = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      proposedForm = _useState4[0],\n      setProposedForm = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      proposedRecord = _useState6[0],\n      setProposedRecord = _useState6[1];\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var handleGetListNewStaff = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(staffInfo) {\n      var _res$data;\n\n      var res, _res$data2;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getProposedStaff(staffInfo);\n\n            case 2:\n              res = _context.sent;\n\n              if ((res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.code) === 200) {\n                setProposedHistory(res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.data);\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleGetListNewStaff(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    handleGetListNewStaff(staffInfo);\n  }, []);\n\n  var addProposeList = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n      var _res$data3;\n\n      var staffData, res, _res$data4, _res$data5;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              staffData = _objectSpread(_objectSpread(_objectSpread({}, proposedHistory), values), {}, {\n                employeeId: staffInfo.employeeId\n              });\n              _context2.next = 3;\n              return addProposedStaff(staffData);\n\n            case 3:\n              res = _context2.sent;\n\n              if ((res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.code) === 200) {\n                toast.success(res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.message);\n                form.resetFields();\n                handleShowProposedForm();\n              } else {\n                toast.warning(res === null || res === void 0 ? void 0 : (_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.message);\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function addProposeList(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onReset = function onReset() {\n    form.resetFields();\n  };\n\n  var handleShowProposedForm = function handleShowProposedForm() {\n    setProposedForm(!proposedForm);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-form-layout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onFinish: addProposeList,\n    ref: formRef,\n    form: form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"createTime\",\n    label: \"Ng\\xE0y \\u0111\\u0103ng k\\xED\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    placeholder: \"YYYY-MM-DD\",\n    format: \"YYYY-MM-DD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"type\",\n    label: \"Lo\\u1EA1i\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"note\",\n    label: \"Ghi ch\\xFA\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"content\",\n    label: \"N\\u1ED9i dung\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    autoSize: {\n      minRows: 1,\n      maxRows: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    style: {\n      display: 'flex',\n      marginTop: '10px',\n      alignItems: 'flex-end'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-form\",\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 29\n    }\n  }, \"Th\\xEAm\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"cancel-form\",\n    htmlType: \"button\",\n    onClick: onReset,\n    type: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, \"H\\u1EE7y\"))))), /*#__PURE__*/React.createElement(Table, {\n    columns: [{\n      key: '1',\n      title: 'Hành động',\n      render: function render(record) {\n        return /*#__PURE__*/React.createElement(ActionButton, {\n          update: true,\n          deleted: true,\n          item: record,\n          onSelect: function onSelect(record, method) {\n            if (method === 0) {\n              setProposedRecord(record);\n              handleShowProposedForm();\n            } else if (method === 1) {\n              onDelete();\n            } else {\n              alert('Call Selected Here:' + record.id);\n            }\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 33\n          }\n        });\n      }\n    }, {\n      key: '2',\n      title: 'Loại',\n      dataIndex: 'type'\n    }, {\n      key: '3',\n      title: 'Ngày',\n      render: function render(record) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 37\n          }\n        }, moment(record.createTime).format('DD-MM-YYYY')));\n      }\n    }, {\n      key: '3',\n      title: 'Nội dung',\n      dataIndex: 'content'\n    }, {\n      key: '5',\n      title: 'Ghi chú',\n      dataIndex: 'note'\n    }],\n    rowKey: \"studentId\",\n    dataSource: proposedHistory,\n    pagination: {\n      defaultPageSize: 5,\n      showSizeChanger: true,\n      pageSizeOptions: ['5', '10', '20', '30']\n    },\n    style: {\n      margin: '15px 5px 0 5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }), proposedForm && /*#__PURE__*/React.createElement(ProposedForm, {\n    open: proposedForm,\n    onOk: handleShowProposedForm,\n    onCancel: handleShowProposedForm,\n    staffInfo: staffInfo,\n    proposedRecord: proposedRecord,\n    onSend: onSend,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  }));\n}\n\nexport default ProposedCollapse;","map":{"version":3,"sources":["D:/DAn/FEAmin/QLNV/src/app/views/update-happenings/proposed/ProposeCollapse.js"],"names":["React","useEffect","useState","Button","Col","DatePicker","Form","Input","Row","Table","ActionButton","getProposedStaff","addProposedStaff","moment","ProposedForm","toast","configure","autoClose","draggable","limit","TextArea","ProposedCollapse","formRef","staffInfo","onSend","onDelete","proposedHistory","setProposedHistory","proposedForm","setProposedForm","proposedRecord","setProposedRecord","useForm","form","handleGetListNewStaff","res","data","code","addProposeList","values","staffData","employeeId","success","message","resetFields","handleShowProposedForm","warning","onReset","required","whitespace","minRows","maxRows","display","marginTop","alignItems","key","title","render","record","method","alert","id","dataIndex","createTime","format","defaultPageSize","showSizeChanger","pageSizeOptions","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Button, Col, DatePicker, Form, Input, Row, Table } from 'antd';\r\nimport { ActionButton } from 'app/views/general-settings/TableButton';\r\nimport { getProposedStaff, addProposedStaff } from '../UpdateHappeningsService';\r\nimport moment from 'moment';\r\nimport ProposedForm from './ProposedForm';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\ntoast.configure({\r\n    autoClose: 1000,\r\n    draggable: false,\r\n    limit: 3,\r\n});\r\nconst { TextArea } = Input;\r\n\r\nfunction ProposedCollapse({ formRef, staffInfo, onSend, onDelete }) {\r\n    const [proposedHistory, setProposedHistory] = useState([]);\r\n    const [proposedForm, setProposedForm] = useState(false);\r\n    const [proposedRecord, setProposedRecord] = useState(false);\r\n\r\n    const [form] = Form.useForm();\r\n\r\n    const handleGetListNewStaff = async (staffInfo) => {\r\n        const res = await getProposedStaff(staffInfo);\r\n        if (res?.data?.code === 200) {\r\n            setProposedHistory(res?.data?.data);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        handleGetListNewStaff(staffInfo);\r\n    }, []);\r\n\r\n    const addProposeList = async (values) => {\r\n        const staffData = {\r\n            ...proposedHistory,\r\n            ...values,\r\n            employeeId: staffInfo.employeeId,\r\n        };\r\n\r\n        const res = await addProposedStaff(staffData);\r\n        if (res?.data?.code === 200) {\r\n            toast.success(res?.data?.message);\r\n            form.resetFields();\r\n            handleShowProposedForm();\r\n        } else {\r\n            toast.warning(res?.data?.message);\r\n        }\r\n    };\r\n\r\n    const onReset = () => {\r\n        form.resetFields();\r\n    };\r\n\r\n    const handleShowProposedForm = () => {\r\n        setProposedForm(!proposedForm);\r\n    };\r\n\r\n    return (\r\n        <div className=\"content-form-layout\">\r\n            <Form onFinish={addProposeList} ref={formRef} form={form}>\r\n                <Row>\r\n                    <Col span={24} md={5}>\r\n                        <Form.Item\r\n                            name=\"createTime\"\r\n                            label=\"Ngày đăng kí\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <DatePicker placeholder=\"YYYY-MM-DD\" format=\"YYYY-MM-DD\" />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={7}>\r\n                        <Form.Item\r\n                            name=\"type\"\r\n                            label=\"Loại\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12}>\r\n                        <Form.Item\r\n                            name=\"note\"\r\n                            label=\"Ghi chú\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12}>\r\n                        <Form.Item\r\n                            name=\"content\"\r\n                            label=\"Nội dung\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                            ]}\r\n                        >\r\n                            <TextArea\r\n                                autoSize={{\r\n                                    minRows: 1,\r\n                                    maxRows: 3,\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12} style={{ display: 'flex', marginTop: '10px', alignItems: 'flex-end' }}>\r\n                        <Form.Item>\r\n                            <Button className=\"add-form\" type=\"primary\" htmlType=\"submit\">\r\n                                Thêm\r\n                            </Button>\r\n                            <Button className=\"cancel-form\" htmlType=\"button\" onClick={onReset} type=\"primary\">\r\n                                Hủy\r\n                            </Button>\r\n                            {/* <Button type=\"primary\" htmlType=\"button\" onClick={handleShowProposedForm}>\r\n                                Lưu\r\n                            </Button> */}\r\n                        </Form.Item>\r\n                    </Col>\r\n                </Row>\r\n            </Form>\r\n\r\n            <Table\r\n                columns={[\r\n                    {\r\n                        key: '1',\r\n                        title: 'Hành động',\r\n                        render: (record) => {\r\n                            return (\r\n                                <ActionButton\r\n                                    update\r\n                                    deleted\r\n                                    item={record}\r\n                                    onSelect={(record, method) => {\r\n                                        if (method === 0) {\r\n                                            setProposedRecord(record);\r\n                                            handleShowProposedForm();\r\n                                        } else if (method === 1) {\r\n                                            onDelete();\r\n                                        } else {\r\n                                            alert('Call Selected Here:' + record.id);\r\n                                        }\r\n                                    }}\r\n                                />\r\n                            );\r\n                        },\r\n                    },\r\n                    { key: '2', title: 'Loại', dataIndex: 'type' },\r\n                    {\r\n                        key: '3',\r\n                        title: 'Ngày',\r\n                        render: (record) => {\r\n                            return (\r\n                                <div>\r\n                                    <p>{moment(record.createTime).format('DD-MM-YYYY')}</p>\r\n                                </div>\r\n                            );\r\n                        },\r\n                    },\r\n                    { key: '3', title: 'Nội dung', dataIndex: 'content' },\r\n                    { key: '5', title: 'Ghi chú', dataIndex: 'note' },\r\n                ]}\r\n                rowKey=\"studentId\"\r\n                dataSource={proposedHistory}\r\n                pagination={{\r\n                    defaultPageSize: 5,\r\n                    showSizeChanger: true,\r\n                    pageSizeOptions: ['5', '10', '20', '30'],\r\n                }}\r\n                style={{ margin: '15px 5px 0 5px' }}\r\n            />\r\n\r\n            {proposedForm && (\r\n                <ProposedForm\r\n                    open={proposedForm}\r\n                    onOk={handleShowProposedForm}\r\n                    onCancel={handleShowProposedForm}\r\n                    staffInfo={staffInfo}\r\n                    proposedRecord={proposedRecord}\r\n                    onSend={onSend}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProposedCollapse;\r\n"]},"metadata":{},"sourceType":"module"}