{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\DAn\\\\FEAdmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\DAn\\\\FEAdmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\DAn\\\\FEAdmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\DAn\\\\FEAdmin\\\\src\\\\app\\\\views\\\\KhachDat\\\\KhachDat.jsx\";\n\nimport React, { useState, useEffect } from \"react\";\nimport Styled from '../create-staff/CreateStaffStyled';\nimport { deleteKhachDat, getAllKhachDat } from \"./KhachDatService\";\nimport { DeleteFilled, EditFilled, EyeFilled, HomeFilled } from '@ant-design/icons';\nimport { Breadcrumb, Button, Form, Modal, Table, Tooltip } from 'antd';\nimport SearchStaff from '../create-staff/Search';\nimport { toast } from 'react-toastify';\nimport moment from \"moment\";\nimport KhachDatDialog from \"./KhachDatDialog\";\ntoast.configure({\n  autoClose: 1000,\n  draggable: false,\n  limit: 1000\n});\n\nvar DialogDelete = function DialogDelete(props) {\n  var open = props.open,\n      onOk = props.onOk,\n      onCancel = props.onCancel;\n  return /*#__PURE__*/React.createElement(Modal, {\n    title: \"Xoa Khach San\",\n    open: open,\n    onOk: onOk,\n    onCancel: onCancel,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, \"Ban co chac muon xoa ?\"));\n};\n\nvar KhachDat = function KhachDat() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchInfo = _useState2[0],\n      setSearchInfo = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dem = _useState4[0],\n      setDem = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      dataKhachDatSearch = _useState6[0],\n      setDataKhachDatSearch = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      data = _useState8[0],\n      setData = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      khachDatEdit = _useState10[0],\n      setKhachDatEdit = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      openDialogAdd = _useState12[0],\n      setOpenDialogAdd = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      openDialogDelete = _useState14[0],\n      setOpenDialogDelete = _useState14[1];\n\n  var _useState15 = useState(),\n      _useState16 = _slicedToArray(_useState15, 2),\n      khachDatDelete = _useState16[0],\n      setKhachDatDelete = _useState16[1]; // const [cellVisible, setCellVisible] = useState({});\n  // const handleCellClick = (key) => {\n  //     // console.log(\"==>key: \", key)\n  //     setCellVisible({\n  //         ...cellVisible,\n  //         [key]: !cellVisible[key]\n  //     });\n  // };\n\n\n  var onSearch = function onSearch() {\n    var result = data.filter(function (item) {\n      if (item.hoTen.toLowerCase().includes(searchInfo.toLowerCase()) || item.sdt.includes(searchInfo)) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n    setDataKhachDatSearch(result);\n    setDem(1);\n  };\n\n  var returnKhachDat = function returnKhachDat() {\n    if (dataKhachDatSearch.length === 0 && dem === 0) {\n      return data;\n    } else if (dataKhachDatSearch.length === 0 && dem === 1) {\n      return dataKhachDatSearch;\n    } else {\n      return dataKhachDatSearch;\n    }\n  }; // === get =====\n\n\n  var getData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getAllKhachDat();\n\n            case 2:\n              res = _context.sent;\n              console.log(\"==> res\", res.data);\n              setData(res.data);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getData() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // =============\n  // ======= them ========\n\n\n  var handleClickAdd = function handleClickAdd() {\n    setKhachDatEdit();\n    setOpenDialogAdd(true);\n  };\n\n  var cancelDialogAdd = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setOpenDialogAdd(false); // setCellVisible({})\n\n              setKhachDatEdit();\n              getData();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function cancelDialogAdd() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // =====================\n  // ======== sua =========\n\n\n  var onClickIconEdit = function onClickIconEdit(rowData) {\n    setKhachDatEdit(rowData);\n    setOpenDialogAdd(true);\n  }; // ======================\n  // ======= xoa  ===========\n\n\n  var onClickIconDelete = function onClickIconDelete(rowData) {\n    setOpenDialogDelete(true);\n    setKhachDatDelete(rowData);\n  };\n\n  var onCancelDelete = function onCancelDelete() {\n    setOpenDialogDelete(false);\n    setKhachDatDelete();\n    setKhachDatEdit(); // setCellVisible({})\n  };\n\n  var onOkDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return deleteKhachDat(khachDatDelete.id_khach);\n\n            case 2:\n              res = _context3.sent;\n\n              if (res.status === 200) {\n                toast.success(\"Xoa Tin Tuc thanh cong\");\n              } else {\n                toast.error(\"Loi !!!\");\n              }\n\n              onCancelDelete();\n              _context3.next = 7;\n              return getData();\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onOkDelete() {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // ======================\n\n\n  useEffect(function () {\n    getData();\n  }, []);\n  return /*#__PURE__*/React.createElement(Styled, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-sm-30\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb, {\n    style: {\n      padding: '0 0 30px 0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    href: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(HomeFilled, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    href: \"/conclude/manage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, \"Qu\\u1EA3n l\\xFD tour\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, \"Tin t\\u1EE9c\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"set-space-between\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"middle\",\n    onClick: handleClickAdd,\n    className: \"btn-add-new\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, \"T\\u1EA0O M\\u1EDAI\"), /*#__PURE__*/React.createElement(SearchStaff, {\n    searchInfo: searchInfo,\n    setSearchInfo: setSearchInfo,\n    onSearch: onSearch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  })), openDialogAdd && /*#__PURE__*/React.createElement(KhachDatDialog, {\n    item: khachDatEdit,\n    open: openDialogAdd,\n    onCancel: cancelDialogAdd,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }), openDialogDelete && /*#__PURE__*/React.createElement(DialogDelete, {\n    open: openDialogDelete,\n    onOk: onOkDelete,\n    onCancel: onCancelDelete,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    dataSource: returnKhachDat(),\n    columns: [{\n      key: 'action',\n      title: 'Thao tác',\n      dataIndex: 'action',\n      align: 'center',\n      width: 100,\n      render: function render(text, rowData) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"createStaff-action\",\n          style: {\n            gap: \"16px 16px\"\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(Tooltip, {\n          placement: \"bottom\",\n          title: \"ch\\u1EC9nh s\\u1EEDa\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(EditFilled, {\n          style: {\n            color: \"blue\"\n          },\n          onClick: function onClick() {\n            return onClickIconEdit(rowData);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 45\n          }\n        })), /*#__PURE__*/React.createElement(Tooltip, {\n          placement: \"bottom\",\n          title: \"x\\xF3a\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(DeleteFilled, {\n          style: {\n            color: \"red\"\n          },\n          onClick: function onClick() {\n            return onClickIconDelete(rowData);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 45\n          }\n        })));\n      }\n    }, {\n      title: 'hoTen',\n      dataIndex: \"hoTen\"\n    }, {\n      title: 'sdt',\n      // dataIndex: 'sdt',\n      render: function render(text, record) {\n        return \"0\" + record.sdt;\n      }\n    }, {\n      title: \"email\",\n      dataIndex: \"email\"\n    }, {\n      title: \"diaChi\",\n      dataIndex: \"diaChi\"\n    }, {\n      title: \"yeuCau\",\n      dataIndex: \"yeuCau\"\n    }, {\n      title: \"createDate\",\n      dataIndex: \"createDate\",\n      render: function render(text, record) {\n        return moment(record.createDate, \"YYYY-MM-DD\").format(\"DD-MM-YYYY\");\n      }\n    }, {\n      title: \"idKS\",\n      dataIndex: \"idKS\"\n    }],\n    pagination: {\n      showSizeChanger: true,\n      pageSizeOptions: ['5', '10', '20']\n    },\n    scroll: {\n      y: 440\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default KhachDat;","map":{"version":3,"sources":["D:/DAn/FEAdmin/src/app/views/KhachDat/KhachDat.jsx"],"names":["React","useState","useEffect","Styled","deleteKhachDat","getAllKhachDat","DeleteFilled","EditFilled","EyeFilled","HomeFilled","Breadcrumb","Button","Form","Modal","Table","Tooltip","SearchStaff","toast","moment","KhachDatDialog","configure","autoClose","draggable","limit","DialogDelete","props","open","onOk","onCancel","KhachDat","searchInfo","setSearchInfo","dem","setDem","dataKhachDatSearch","setDataKhachDatSearch","data","setData","khachDatEdit","setKhachDatEdit","openDialogAdd","setOpenDialogAdd","openDialogDelete","setOpenDialogDelete","khachDatDelete","setKhachDatDelete","onSearch","result","filter","item","hoTen","toLowerCase","includes","sdt","returnKhachDat","length","getData","res","console","log","handleClickAdd","cancelDialogAdd","onClickIconEdit","rowData","onClickIconDelete","onCancelDelete","onOkDelete","id_khach","status","success","error","padding","key","title","dataIndex","align","width","render","text","gap","color","record","createDate","format","showSizeChanger","pageSizeOptions","y"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport Styled from '../create-staff/CreateStaffStyled';\r\nimport { deleteKhachDat, getAllKhachDat } from \"./KhachDatService\";\r\nimport {\r\n    DeleteFilled,\r\n    EditFilled,\r\n    EyeFilled,\r\n    HomeFilled,\r\n} from '@ant-design/icons';\r\nimport { Breadcrumb, Button, Form, Modal, Table, Tooltip } from 'antd';\r\nimport SearchStaff from '../create-staff/Search';\r\nimport { toast } from 'react-toastify';\r\nimport moment from \"moment\";\r\nimport KhachDatDialog from \"./KhachDatDialog\";\r\n\r\n\r\ntoast.configure({\r\n    autoClose: 1000,\r\n    draggable: false,\r\n    limit: 1000\r\n});\r\n\r\nconst DialogDelete = (props) => {\r\n\r\n    const { open, onOk, onCancel } = props\r\n\r\n    return (\r\n        <Modal\r\n            title=\"Xoa Khach San\"\r\n            open={open}\r\n            onOk={onOk}\r\n            onCancel={onCancel}\r\n        >\r\n            <p>Ban co chac muon xoa ?</p>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nconst KhachDat = () => {\r\n\r\n    const [searchInfo, setSearchInfo] = useState(\"\")\r\n    const [dem, setDem] = useState(0)\r\n    const [dataKhachDatSearch, setDataKhachDatSearch] = useState([])\r\n\r\n    const [data, setData] = useState([])\r\n    const [khachDatEdit, setKhachDatEdit] = useState()\r\n    const [openDialogAdd, setOpenDialogAdd] = useState(false)\r\n\r\n    const [openDialogDelete, setOpenDialogDelete] = useState(false)\r\n    const [khachDatDelete, setKhachDatDelete] = useState()\r\n\r\n    // const [cellVisible, setCellVisible] = useState({});\r\n    // const handleCellClick = (key) => {\r\n    //     // console.log(\"==>key: \", key)\r\n    //     setCellVisible({\r\n    //         ...cellVisible,\r\n    //         [key]: !cellVisible[key]\r\n    //     });\r\n    // };\r\n\r\n    const onSearch = () => {\r\n        const result = data.filter(\r\n            (item) => {\r\n                if (item.hoTen.toLowerCase().includes(searchInfo.toLowerCase()) || item.sdt.includes(searchInfo)) {\r\n                    return true\r\n                } else {\r\n                    return false\r\n                }\r\n            }\r\n        );\r\n        setDataKhachDatSearch(result)\r\n        setDem(1)\r\n    }\r\n\r\n    const returnKhachDat = () => {\r\n        if (dataKhachDatSearch.length === 0 && dem === 0) {\r\n            return data\r\n        } else if (dataKhachDatSearch.length === 0 && dem === 1) {\r\n            return dataKhachDatSearch\r\n        }\r\n        else {\r\n            return dataKhachDatSearch\r\n        }\r\n    }\r\n\r\n    // === get =====\r\n    const getData = async () => {\r\n        const res = await getAllKhachDat()\r\n        console.log(\"==> res\", res.data)\r\n        setData(res.data)\r\n    }\r\n    // =============\r\n\r\n    // ======= them ========\r\n\r\n    const handleClickAdd = () => {\r\n        setKhachDatEdit()\r\n        setOpenDialogAdd(true)\r\n    }\r\n\r\n    const cancelDialogAdd = async () => {\r\n        setOpenDialogAdd(false)\r\n        // setCellVisible({})\r\n        setKhachDatEdit()\r\n        getData()\r\n    }\r\n\r\n    // =====================\r\n    // ======== sua =========\r\n    const onClickIconEdit = (rowData) => {\r\n        setKhachDatEdit(rowData)\r\n        setOpenDialogAdd(true)\r\n    }\r\n    // ======================\r\n\r\n    // ======= xoa  ===========\r\n\r\n    const onClickIconDelete = (rowData) => {\r\n        setOpenDialogDelete(true)\r\n        setKhachDatDelete(rowData)\r\n    }\r\n\r\n    const onCancelDelete = () => {\r\n        setOpenDialogDelete(false)\r\n        setKhachDatDelete()\r\n        setKhachDatEdit()\r\n        // setCellVisible({})\r\n    }\r\n\r\n    const onOkDelete = async () => {\r\n        const res = await deleteKhachDat(khachDatDelete.id_khach)\r\n\r\n        if (res.status === 200) {\r\n            toast.success(\"Xoa Tin Tuc thanh cong\")\r\n        } else {\r\n            toast.error(\"Loi !!!\")\r\n        }\r\n        onCancelDelete()\r\n        await getData()\r\n    }\r\n\r\n    // ======================\r\n\r\n    useEffect(() => {\r\n        getData()\r\n    }, [])\r\n\r\n    return (\r\n        <Styled>\r\n            <div className=\"m-sm-30\">\r\n                <Breadcrumb style={{ padding: '0 0 30px 0' }}>\r\n                    <Breadcrumb.Item href=\"/\">\r\n                        <HomeFilled />\r\n                    </Breadcrumb.Item>\r\n                    <Breadcrumb.Item href=\"/conclude/manage\">\r\n                        <span>Quản lý tour</span>\r\n                    </Breadcrumb.Item>\r\n                    <Breadcrumb.Item>Tin tức</Breadcrumb.Item>\r\n                </Breadcrumb>\r\n\r\n                <div className='set-space-between'>\r\n                    <Button size=\"middle\"\r\n                        onClick={handleClickAdd}\r\n                        className=\"btn-add-new\"\r\n                    >\r\n                        TẠO MỚI\r\n                    </Button>\r\n                    <SearchStaff\r\n                        searchInfo={searchInfo} setSearchInfo={setSearchInfo} onSearch={onSearch}\r\n                    />\r\n                </div>\r\n\r\n                {\r\n                    openDialogAdd &&\r\n                    <KhachDatDialog\r\n                        item={khachDatEdit}\r\n                        open={openDialogAdd}\r\n                        onCancel={cancelDialogAdd}\r\n                    />\r\n                }\r\n\r\n                {\r\n                    openDialogDelete &&\r\n                    <DialogDelete\r\n                        open={openDialogDelete}\r\n                        onOk={onOkDelete}\r\n                        onCancel={onCancelDelete}\r\n                    />\r\n                }\r\n\r\n\r\n                <Table\r\n                    dataSource={returnKhachDat()}\r\n                    columns={[\r\n                        {\r\n                            key: 'action',\r\n                            title: 'Thao tác',\r\n                            dataIndex: 'action',\r\n                            align: 'center',\r\n                            width: 100,\r\n                            render: (text, rowData) => {\r\n                                return (\r\n                                    <div\r\n                                        className='createStaff-action'\r\n                                        style={{ gap: \"16px 16px\" }}\r\n                                    >\r\n                                        <Tooltip placement=\"bottom\" title=\"chỉnh sửa\">\r\n                                            <EditFilled\r\n                                                style={{ color: \"blue\" }}\r\n                                                onClick={() => onClickIconEdit(rowData)}\r\n                                            />\r\n                                        </Tooltip>\r\n\r\n                                        <Tooltip placement=\"bottom\" title=\"xóa\">\r\n                                            <DeleteFilled\r\n                                                style={{ color: \"red\" }}\r\n                                                onClick={() => onClickIconDelete(rowData)}\r\n                                            />\r\n                                        </Tooltip>\r\n                                    </div>\r\n                                );\r\n                            },\r\n                        },\r\n\r\n                        {\r\n                            title: 'hoTen',\r\n                            dataIndex: \"hoTen\",\r\n                        },\r\n                        {\r\n                            title: 'sdt',\r\n                            // dataIndex: 'sdt',\r\n                            render: (text, record) => \"0\" + record.sdt\r\n                        },\r\n                        {\r\n                            title: \"email\",\r\n                            dataIndex: \"email\"\r\n                        },\r\n                        {\r\n                            title: \"diaChi\",\r\n                            dataIndex: \"diaChi\"\r\n                        },\r\n                        {\r\n                            title: \"yeuCau\",\r\n                            dataIndex: \"yeuCau\"\r\n                        },\r\n                        {\r\n                            title: \"createDate\",\r\n                            dataIndex: \"createDate\",\r\n                            render: (text, record) => moment(record.createDate, \"YYYY-MM-DD\").format(\"DD-MM-YYYY\")\r\n                        },\r\n                        {\r\n                            title: \"idKS\",\r\n                            dataIndex: \"idKS\"\r\n                        },\r\n                    ]}\r\n                    pagination={{\r\n                        showSizeChanger: true,\r\n                        pageSizeOptions: ['5', '10', '20'],\r\n                    }}\r\n                    scroll={{ y: 440 }}\r\n                />\r\n            </div>\r\n        </Styled>\r\n    )\r\n}\r\n\r\nexport default KhachDat\r\n"]},"metadata":{},"sourceType":"module"}