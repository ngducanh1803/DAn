{"ast":null,"code":"import _taggedTemplateLiteral from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nimport _objectSpread from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\DAn\\\\FEAmin\\\\QLNV\\\\src\\\\app\\\\views\\\\create-staff\\\\dialog-staff\\\\index.jsx\",\n    _templateObject;\n\nimport React from \"react\";\nimport { Button, Form, Modal } from 'antd';\nimport moment from \"moment\";\nimport { useState } from \"react\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Tabs } from 'antd';\nimport TabInfo from \"./tab-info\";\nimport TabTextInfo from \"./tab-text-info\";\nimport TabFamilyRelationShip from \"./tab-family-relationship\";\nimport { useEffect } from \"react\"; // import { AddressActionTypes } from \"app/redux/constants\";\n\nimport Styled from \"./styled\";\nimport DialogRegister from \"./dialog-register\";\nimport { addNewStaff, getStaffById, updateStaff } from \"../CreateStaffService\";\nimport { isEmpty } from \"lodash\";\nimport styled from \"styled-components\";\nvar TabPane = Tabs.TabPane;\ntoast.configure({\n  autoClose: 1000,\n  draggable: false,\n  limit: 3\n});\n\nvar DialogStaff = function DialogStaff(_ref) {\n  var open = _ref.open,\n      handleClose = _ref.handleClose,\n      employeeId = _ref.employeeId,\n      setEmployeeId = _ref.setEmployeeId;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      listRelationship = _useState2[0],\n      setListRelationship = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      listDiploma = _useState4[0],\n      setListDiploma = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      staffInfo = _useState6[0],\n      setStaffInfo = _useState6[1];\n\n  var _useState7 = useState('1'),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentTab = _useState8[0],\n      setCurrentTab = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      fileImage = _useState10[0],\n      setFileImage = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      shouldOpenDialogRegister = _useState12[0],\n      setShouldOpenDialogRegister = _useState12[1];\n\n  var _useState13 = useState(!employeeId),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isCheckDisableRegister = _useState14[0],\n      setIsCheckDisableRegister = _useState14[1];\n\n  var listGender = [{\n    value: 0,\n    label: 'Nam'\n  }, {\n    value: 1,\n    label: 'Nữ'\n  }];\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var handleTabChange = function handleTabChange(tab) {\n    // Validate all fields of the current tab before switching to the next tab\n    form.validateFields().then(function (values) {\n      setCurrentTab(tab);\n    }).catch(function (errorInfo) {\n      console.log('Validate Failed:', errorInfo);\n    });\n  };\n\n  var handleGetStaffById = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(employeeId) {\n      var _res$data, _res$data2, _res$data2$data, _res$data2$data$emplo, _res$data3, _res$data3$data, _res$data4, _res$data4$data, _res$data5, _res$data5$data, _employeeInfo$dateOfB;\n\n      var res, employeeInfo;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getStaffById({\n                employeeId: employeeId\n              });\n\n            case 2:\n              res = _context.sent;\n              setStaffInfo(res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data);\n              setFileImage(res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : (_res$data2$data = _res$data2.data) === null || _res$data2$data === void 0 ? void 0 : (_res$data2$data$emplo = _res$data2$data.employeeInfo) === null || _res$data2$data$emplo === void 0 ? void 0 : _res$data2$data$emplo.photoUrl);\n              setListRelationship(res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : (_res$data3$data = _res$data3.data) === null || _res$data3$data === void 0 ? void 0 : _res$data3$data.familyRelations);\n              setListDiploma(res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : (_res$data4$data = _res$data4.data) === null || _res$data4$data === void 0 ? void 0 : _res$data4$data.certificates);\n              employeeInfo = res === null || res === void 0 ? void 0 : (_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : (_res$data5$data = _res$data5.data) === null || _res$data5$data === void 0 ? void 0 : _res$data5$data.employeeInfo;\n              form.setFieldsValue({\n                address: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.address,\n                code: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.code,\n                citizenId: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.citizenId,\n                dateOfBirth: employeeInfo === null || employeeInfo === void 0 ? void 0 : (_employeeInfo$dateOfB = employeeInfo.dateOfBirth) === null || _employeeInfo$dateOfB === void 0 ? void 0 : _employeeInfo$dateOfB.split(\" \")[0],\n                email: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.email,\n                fullName: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.fullName,\n                gender: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.gender,\n                phone: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.phone,\n                photoUrl: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.photoUrl,\n                teamId: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.teamId\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleGetStaffById(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (employeeId) {\n      handleGetStaffById(employeeId);\n    }\n  }, []);\n\n  var handleSubmitStaff = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n      var staffData, certificates, familyRelations, _res$data6, res, _res$data7, _res$data8, _res$data8$data, _res$data8$data$emplo, _res$data9, _res$data10, _res, _res$data11, _res$data12;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              staffData = _objectSpread(_objectSpread({}, values), {}, {\n                photoUrl: \"\\\"\".concat(fileImage, \"\\\"\"),\n                teamId: values.teamId.toString()\n              });\n              certificates = listDiploma;\n              familyRelations = listRelationship;\n\n              if (employeeId) {\n                _context2.next = 10;\n                break;\n              }\n\n              _context2.next = 6;\n              return addNewStaff({\n                employeeInfo: staffData,\n                certificates: certificates,\n                familyRelations: familyRelations\n              });\n\n            case 6:\n              res = _context2.sent;\n\n              if ((res === null || res === void 0 ? void 0 : (_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : _res$data6.code) === 200) {\n                setIsCheckDisableRegister(false);\n                setStaffInfo(res === null || res === void 0 ? void 0 : (_res$data7 = res.data) === null || _res$data7 === void 0 ? void 0 : _res$data7.data);\n                setEmployeeId(res === null || res === void 0 ? void 0 : (_res$data8 = res.data) === null || _res$data8 === void 0 ? void 0 : (_res$data8$data = _res$data8.data) === null || _res$data8$data === void 0 ? void 0 : (_res$data8$data$emplo = _res$data8$data.employeeInfo) === null || _res$data8$data$emplo === void 0 ? void 0 : _res$data8$data$emplo.employeeId);\n                toast.success('Thêm thành công');\n              } else {\n                toast.warning(res === null || res === void 0 ? void 0 : (_res$data9 = res.data) === null || _res$data9 === void 0 ? void 0 : _res$data9.message);\n              }\n\n              _context2.next = 14;\n              break;\n\n            case 10:\n              _context2.next = 12;\n              return updateStaff({\n                employeeId: employeeId,\n                employeeInfo: staffData,\n                certificates: certificates.map(function (item) {\n                  return {\n                    content: item.content,\n                    educationalOrg: item.educationalOrg,\n                    field: item.field,\n                    issuanceDate: moment(item.issuanceDate).format(\"YYYY-MM-DD\"),\n                    name: item.name,\n                    certificateId: item.certificateId\n                  };\n                }),\n                familyRelations: familyRelations.map(function (item) {\n                  return {\n                    familyRelationId: item.familyRelationId,\n                    name: item.name,\n                    gender: item.gender,\n                    phone: item.phone,\n                    dateOfBirth: moment(item.dateOfBirth).format(\"YYYY-MM-DD\"),\n                    citizenId: item.citizenId,\n                    relation: item.relation,\n                    address: item.address\n                  };\n                })\n              });\n\n            case 12:\n              _res = _context2.sent;\n\n              if ((_res === null || _res === void 0 ? void 0 : (_res$data10 = _res.data) === null || _res$data10 === void 0 ? void 0 : _res$data10.code) === 200) {\n                setStaffInfo(_res === null || _res === void 0 ? void 0 : (_res$data11 = _res.data) === null || _res$data11 === void 0 ? void 0 : _res$data11.data);\n                toast.success('Sửa thành công');\n              } else {\n                toast.warning(_res === null || _res === void 0 ? void 0 : (_res$data12 = _res.data) === null || _res$data12 === void 0 ? void 0 : _res$data12.message);\n              }\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleSubmitStaff(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onClickRegister = function onClickRegister() {\n    setShouldOpenDialogRegister(true);\n  };\n\n  var handleCloseDialogRegister = function handleCloseDialogRegister() {\n    setShouldOpenDialogRegister(false);\n  };\n\n  return /*#__PURE__*/React.createElement(StyledModal, {\n    title: !isEmpty(staffInfo) ? \"Chỉnh sửa nhân viên\" : \"Tạo mới nhân viên\",\n    centered: true,\n    open: open,\n    width: 1000,\n    onCancel: handleClose,\n    footer: null,\n    className: \"modal-staff-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    form: form,\n    onFinish: handleSubmitStaff,\n    layout: \"vertical\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Styled, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"set-scroll\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    activeKey: currentTab,\n    onChange: handleTabChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"TH\\xD4NG TIN NH\\xC2N VI\\xCAN\",\n    key: \"1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(TabInfo, {\n    staffInfo: staffInfo,\n    setStaffInfo: setStaffInfo,\n    listGender: listGender,\n    form: form,\n    fileImage: fileImage,\n    setFileImage: setFileImage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"QUAN H\\u1EC6 GIA \\u0110\\xCCNH\",\n    key: \"2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(TabFamilyRelationShip, {\n    listRelationship: listRelationship,\n    setListRelationship: setListRelationship,\n    listGender: listGender,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"TH\\xD4NG TIN V\\u0102N B\\u1EB0NG\",\n    key: \"3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(TabTextInfo, {\n    listDiploma: listDiploma,\n    setListDiploma: setListDiploma,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-action\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-save\",\n    htmlType: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 25\n    }\n  }, \"L\\u01AFU\"), /*#__PURE__*/React.createElement(Button, {\n    disabled: isCheckDisableRegister,\n    className: \"btn-register\",\n    onClick: function onClick() {\n      return onClickRegister();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 25\n    }\n  }, \"\\u0110\\u0102NG K\\xDD\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-close\",\n    onClick: handleClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, \"H\\u1EE6Y\"), shouldOpenDialogRegister && /*#__PURE__*/React.createElement(DialogRegister, {\n    open: shouldOpenDialogRegister,\n    handleCloseDialogRegister: handleCloseDialogRegister,\n    employeeId: employeeId,\n    handleClose: handleClose,\n    staffInfo: staffInfo,\n    setStaffInfo: setStaffInfo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 29\n    }\n  })))));\n};\n\nexport default DialogStaff;\nvar StyledModal = styled(Modal)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    .ant-modal {\\n        height: 90vh;\\n    }\\n    .ant-modal-body {\\n        padding: 20px 20px 0;\\n        height: 82vh;\\n        overflow-y: hidden;\\n    }\\n    .ant-modal-content {\\n        height: 90vh;\\n        overflow: hidden;\\n    }\\n    \\n\"])));","map":{"version":3,"sources":["D:/DAn/FEAmin/QLNV/src/app/views/create-staff/dialog-staff/index.jsx"],"names":["React","Button","Form","Modal","moment","useState","toast","Tabs","TabInfo","TabTextInfo","TabFamilyRelationShip","useEffect","Styled","DialogRegister","addNewStaff","getStaffById","updateStaff","isEmpty","styled","TabPane","configure","autoClose","draggable","limit","DialogStaff","open","handleClose","employeeId","setEmployeeId","listRelationship","setListRelationship","listDiploma","setListDiploma","staffInfo","setStaffInfo","currentTab","setCurrentTab","fileImage","setFileImage","shouldOpenDialogRegister","setShouldOpenDialogRegister","isCheckDisableRegister","setIsCheckDisableRegister","listGender","value","label","useForm","form","handleTabChange","tab","validateFields","then","values","catch","errorInfo","console","log","handleGetStaffById","res","data","employeeInfo","photoUrl","familyRelations","certificates","setFieldsValue","address","code","citizenId","dateOfBirth","split","email","fullName","gender","phone","teamId","handleSubmitStaff","staffData","toString","success","warning","message","map","item","content","educationalOrg","field","issuanceDate","format","name","certificateId","familyRelationId","relation","onClickRegister","handleCloseDialogRegister","StyledModal"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Button, Form, Modal } from 'antd';\r\nimport moment from \"moment\";\r\nimport { useState } from \"react\";\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Tabs } from 'antd';\r\nimport TabInfo from \"./tab-info\";\r\nimport TabTextInfo from \"./tab-text-info\";\r\nimport TabFamilyRelationShip from \"./tab-family-relationship\";\r\nimport { useEffect } from \"react\";\r\n// import { AddressActionTypes } from \"app/redux/constants\";\r\nimport Styled from \"./styled\";\r\nimport DialogRegister from \"./dialog-register\";\r\nimport { addNewStaff, getStaffById, updateStaff } from \"../CreateStaffService\";\r\nimport { isEmpty } from \"lodash\";\r\nimport styled from \"styled-components\"\r\n\r\nconst TabPane = Tabs.TabPane\r\n\r\ntoast.configure({\r\n    autoClose: 1000,\r\n    draggable: false,\r\n    limit: 3\r\n});\r\n\r\nconst DialogStaff = ({ open, handleClose, employeeId, setEmployeeId }) => {\r\n    const [listRelationship, setListRelationship] = useState([]);\r\n    const [listDiploma, setListDiploma] = useState([]);\r\n    const [staffInfo, setStaffInfo] = useState({});\r\n    const [currentTab, setCurrentTab] = useState('1');\r\n    const [fileImage, setFileImage] = useState(\"\");\r\n    const [shouldOpenDialogRegister, setShouldOpenDialogRegister] = useState(false)\r\n    const [isCheckDisableRegister, setIsCheckDisableRegister] = useState(!employeeId)\r\n\r\n    const listGender = [\r\n        { value: 0, label: 'Nam' },\r\n        { value: 1, label: 'Nữ' },\r\n    ];\r\n\r\n    const [form] = Form.useForm();\r\n\r\n    const handleTabChange = (tab) => {\r\n        // Validate all fields of the current tab before switching to the next tab\r\n        form.validateFields().then((values) => {\r\n            setCurrentTab(tab);\r\n        }).catch((errorInfo) => {\r\n            console.log('Validate Failed:', errorInfo);\r\n        });\r\n    };\r\n\r\n    const handleGetStaffById = async (employeeId) => {\r\n        const res = await getStaffById({ employeeId })\r\n\r\n        setStaffInfo(res?.data?.data)\r\n\r\n        setFileImage(res?.data?.data?.employeeInfo?.photoUrl);\r\n\r\n        setListRelationship(res?.data?.data?.familyRelations);\r\n\r\n        setListDiploma(res?.data?.data?.certificates)\r\n\r\n        const employeeInfo = res?.data?.data?.employeeInfo\r\n\r\n        form.setFieldsValue({\r\n            address: employeeInfo?.address,\r\n            code: employeeInfo?.code,\r\n            citizenId: employeeInfo?.citizenId,\r\n            dateOfBirth: employeeInfo?.dateOfBirth?.split(\" \")[0],\r\n            email: employeeInfo?.email,\r\n            fullName: employeeInfo?.fullName,\r\n            gender: employeeInfo?.gender,\r\n            phone: employeeInfo?.phone,\r\n            photoUrl: employeeInfo?.photoUrl,\r\n            teamId: employeeInfo?.teamId,\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (employeeId) {\r\n            handleGetStaffById(employeeId)\r\n        }\r\n    }, [])\r\n    const handleSubmitStaff = async (values) => {\r\n        const staffData = {\r\n            ...values,\r\n            photoUrl: `\"${fileImage}\"`,\r\n            teamId: values.teamId.toString(),\r\n        }\r\n\r\n        const certificates = listDiploma;\r\n\r\n        const familyRelations = listRelationship\r\n\r\n        if (!employeeId) {\r\n            const res = await addNewStaff({ employeeInfo: staffData, certificates, familyRelations })\r\n            if (res?.data?.code === 200) {\r\n                setIsCheckDisableRegister(false);\r\n                setStaffInfo(res?.data?.data);\r\n\r\n                setEmployeeId(res?.data?.data?.employeeInfo?.employeeId)\r\n\r\n                toast.success('Thêm thành công')\r\n            } else {\r\n                toast.warning(res?.data?.message)\r\n            }\r\n\r\n        } else {\r\n            const res = await updateStaff({\r\n                employeeId: employeeId,\r\n                employeeInfo: staffData,\r\n                certificates: certificates.map((item) => {\r\n                    return {\r\n                        content: item.content,\r\n                        educationalOrg: item.educationalOrg,\r\n                        field: item.field,\r\n                        issuanceDate: moment(item.issuanceDate).format(\"YYYY-MM-DD\"),\r\n                        name: item.name,\r\n                        certificateId: item.certificateId\r\n                    }\r\n                }),\r\n                familyRelations: familyRelations.map((item => {\r\n                    return {\r\n                        familyRelationId: item.familyRelationId,\r\n                        name: item.name,\r\n                        gender: item.gender,\r\n                        phone: item.phone,\r\n                        dateOfBirth: moment(item.dateOfBirth).format(\"YYYY-MM-DD\"),\r\n                        citizenId: item.citizenId,\r\n                        relation: item.relation,\r\n                        address: item.address\r\n                    }\r\n                }))\r\n            })\r\n            if (res?.data?.code === 200) {\r\n                setStaffInfo(res?.data?.data)\r\n                toast.success('Sửa thành công')\r\n            } else {\r\n                toast.warning(res?.data?.message)\r\n            }\r\n        }\r\n    };\r\n\r\n    const onClickRegister = () => {\r\n        setShouldOpenDialogRegister(true)\r\n    };\r\n\r\n    const handleCloseDialogRegister = () => {\r\n        setShouldOpenDialogRegister(false)\r\n    }\r\n\r\n    return (\r\n        <StyledModal\r\n            title={!isEmpty(staffInfo) ? \"Chỉnh sửa nhân viên\" : \"Tạo mới nhân viên\"}\r\n            centered\r\n            open={open}\r\n            width={1000}\r\n            onCancel={handleClose}\r\n            footer={null}\r\n            className=\"modal-staff-info\"\r\n        >\r\n            <Form\r\n                form={form}\r\n                onFinish={handleSubmitStaff}\r\n                layout=\"vertical\"\r\n            >\r\n                <Styled>\r\n                    <div className=\"set-scroll\">\r\n                        <Tabs activeKey={currentTab} onChange={handleTabChange}>\r\n                            <TabPane tab=\"THÔNG TIN NHÂN VIÊN\" key=\"1\">\r\n                                <TabInfo\r\n                                    staffInfo={staffInfo}\r\n                                    setStaffInfo={setStaffInfo}\r\n                                    listGender={listGender}\r\n                                    form={form}\r\n                                    fileImage={fileImage}\r\n                                    setFileImage={setFileImage}\r\n                                />\r\n                            </TabPane>\r\n                            <TabPane tab=\"QUAN HỆ GIA ĐÌNH\" key=\"2\">\r\n                                <TabFamilyRelationShip\r\n                                    listRelationship={listRelationship}\r\n                                    setListRelationship={setListRelationship}\r\n                                    listGender={listGender}\r\n                                />\r\n                            </TabPane>\r\n                            <TabPane tab=\"THÔNG TIN VĂN BẰNG\" key=\"3\">\r\n                                <TabTextInfo\r\n                                    listDiploma={listDiploma}\r\n                                    setListDiploma={setListDiploma}\r\n                                />\r\n                            </TabPane>\r\n                        </Tabs>\r\n                    </div>\r\n\r\n                    <div className=\"btn-action\">\r\n                        <Button className=\"btn-save\" htmlType=\"submit\">\r\n                            LƯU\r\n                        </Button>\r\n                        <Button disabled={isCheckDisableRegister} className=\"btn-register\" onClick={() => onClickRegister()}>\r\n                            ĐĂNG KÝ\r\n                        </Button>\r\n                        <Button className=\"btn-close\" onClick={handleClose}>\r\n                            HỦY\r\n                        </Button>\r\n                        {shouldOpenDialogRegister && (\r\n                            <DialogRegister\r\n                                open={shouldOpenDialogRegister}\r\n                                handleCloseDialogRegister={handleCloseDialogRegister}\r\n                                employeeId={employeeId}\r\n                                handleClose={handleClose}\r\n                                staffInfo={staffInfo}\r\n                                setStaffInfo={setStaffInfo}\r\n                            />\r\n                        )}\r\n                    </div>\r\n\r\n                </Styled>\r\n            </Form>\r\n\r\n        </StyledModal>\r\n\r\n    );\r\n}\r\n\r\n\r\nexport default DialogStaff;\r\n\r\nconst StyledModal = styled(Modal)`\r\n    .ant-modal {\r\n        height: 90vh;\r\n    }\r\n    .ant-modal-body {\r\n        padding: 20px 20px 0;\r\n        height: 82vh;\r\n        overflow-y: hidden;\r\n    }\r\n    .ant-modal-content {\r\n        height: 90vh;\r\n        overflow: hidden;\r\n    }\r\n    \r\n`"]},"metadata":{},"sourceType":"module"}